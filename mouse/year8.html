<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SmartKids - Mouse Practice</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { font-family:sans-serif; background:#f3f4f6; margin:0; padding:0; }
  header { background:#1e40af; color:white; padding:1rem; display:flex; justify-content:space-between; align-items:center; }
  header a { background:white; color:#1e40af; padding:0.5rem 1rem; border-radius:0.5rem; font-weight:bold; text-decoration:none; }
  main { padding:2rem; max-width:800px; margin:auto; }
  h2 { margin-bottom:0.5rem; }
  .accordion { border:1px solid #9ca3af; border-radius:0.5rem; margin-bottom:1rem; overflow:hidden; background:white; }
  .accordion-header { padding:0.75rem 1rem; background:#e5e7eb; cursor:pointer; font-weight:bold; }
  .accordion-content { display:none; padding:1rem; }
  .accordion-content.active { display:block; }
  .grid { display:grid; grid-template-columns:repeat(5,1fr); gap:5px; margin-bottom:20px; }
  .cell { background:white; border:1px solid #9ca3af; height:40px; display:flex; align-items:center; justify-content:center; cursor:pointer; user-select:none; }
  #gameArea { width:100%; height:200px; background:#e5e7eb; border-radius:0.5rem; position:relative; margin-bottom:10px; }
  .target { width:40px; height:40px; background:#f59e0b; border-radius:50%; position:absolute; display:flex; justify-content:center; align-items:center; color:white; font-weight:bold; cursor:pointer; user-select:none; }
  #imageArea { width:300px; height:200px; border:1px solid #9ca3af; position:relative; overflow:hidden; margin-bottom:20px; }
  #draggableImage { width:100px; height:100px; position:absolute; top:50px; left:50px; cursor:grab; }
  .stats span { margin-right:10px; font-weight:bold; }
  .restart { background:#1e40af; color:white; padding:0.4rem 0.8rem; border-radius:0.4rem; cursor:pointer; font-size:0.9rem; margin-top:0.5rem; }
</style>
</head>
<body>

<header>
  <h1 class="text-xl font-bold">Year 8 Mouse Practice</h1>
  <a href="https://slide-t.github.io/smartkids-learning/mouse.html">Back To Classes</a>
</header>

<main>

<!-- Spreadsheet Accordion -->
<div class="accordion">
  <div class="accordion-header">Spreadsheet Navigation</div>
  <div class="accordion-content">
    <p>Click cells to select, then drag to fill multiple cells.</p>
    <div class="grid" id="spreadsheet"></div>
    <button class="restart" id="restartSpreadsheet">Restart Spreadsheet</button>
  </div>
</div>

<!-- Gaming Accordion -->
<div class="accordion">
  <div class="accordion-header">Advanced Gaming Controls</div>
  <div class="accordion-content">
    <p>Click targets using left or right mouse buttons.</p>
    <div id="gameArea"></div>
    <div class="stats mt-2">Clicks: <span id="clicks">0</span>, Hits: <span id="hits">0</span>, Accuracy: <span id="accuracy">100</span>%</div>
    <div id="timer" class="mt-2 font-bold">Time left: 0s</div>
    <button class="restart" id="restartGame">Restart Game</button>
  </div>
</div>

<!-- Image Accordion -->
<div class="accordion">
  <div class="accordion-header">Image Editing Basics</div>
  <div class="accordion-content">
    <p>Drag the image around and resize using corner handles.</p>
    <div id="imageArea">
      <img id="draggableImage" src="https://github.com/slide-t/smartkids-learning/blob/main/Image/bag.jpg" draggable="false">
    </div>
    <button class="restart" id="restartImage">Restart Image Practice</button>
  </div>
</div>

</main>

<script>
document.addEventListener('DOMContentLoaded',()=>{

  // Accordion toggle
  document.querySelectorAll('.accordion-header').forEach(header=>{
    header.addEventListener('click',()=>{
      const content=header.nextElementSibling;
      content.classList.toggle('active');

      // Start practice only when first opened
      if(content.classList.contains('active')){
        if(content.querySelector('#spreadsheet')) initSpreadsheet();
        if(content.querySelector('#gameArea')) initGame();
        if(content.querySelector('#imageArea')) initImageDrag();
      }
    });
  });

  // --- Spreadsheet Navigation ---
  function initSpreadsheet(){
    const spreadsheet=document.getElementById('spreadsheet');
    spreadsheet.innerHTML=''; // reset
    const rows=5, cols=5;
    let selecting=false;
    for(let i=0;i<rows*cols;i++){
      const cell=document.createElement('div');
      cell.className='cell';
      cell.addEventListener('mousedown',()=>{
        selecting=true;
        cell.style.background='#fbbf24';
      });
      cell.addEventListener('mouseenter',()=>{
        if(selecting) cell.style.background='#fbbf24';
      });
      spreadsheet.appendChild(cell);
    }
    document.addEventListener('mouseup',()=>{ selecting=false; });
  }

  document.getElementById('restartSpreadsheet').addEventListener('click',()=>initSpreadsheet());

  // --- Advanced Gaming Controls ---
  let clicks=0,hits=0,timer=null,timeLeft=30;
  function initGame(){
    clicks=0; hits=0; timeLeft=30;
    clearInterval(timer);
    const gameArea=document.getElementById('gameArea');
    const clicksEl=document.getElementById('clicks');
    const hitsEl=document.getElementById('hits');
    const accuracyEl=document.getElementById('accuracy');
    const timerEl=document.getElementById('timer');

    function spawnTarget(){
      gameArea.innerHTML='';
      const t=document.createElement('div');
      t.className='target';
      t.textContent='üéØ';
      const areaRect=gameArea.getBoundingClientRect();
      const x=Math.random()*(areaRect.width-40);
      const y=Math.random()*(areaRect.height-40);
      t.style.left=x+'px';
      t.style.top=y+'px';
      gameArea.appendChild(t);

      t.addEventListener('mousedown',(e)=>{
        if(e.button===0 || e.button===2){
          hits++; clicks++;
          updateStats();
          spawnTarget();
        }
      });
    }

    gameArea.onmousedown=(e)=>{
      if(!e.target.classList.contains('target')){ 
        clicks++; updateStats(); 
      }
    };

    function updateStats(){
      clicksEl.textContent=clicks;
      hitsEl.textContent=hits;
      accuracyEl.textContent=clicks>0?Math.round(hits/clicks*100):100;
    }

    function startTimer(){
      timer=setInterval(()=>{
        timeLeft--;
        timerEl.textContent=`Time left: ${timeLeft}s`;
        if(timeLeft<=0){
          clearInterval(timer);
          gameArea.innerHTML='<p class="p-4 font-bold">‚è∞ Time Up! Score: '+hits+'</p>';
        }
      },1000);
    }

    spawnTarget();
    updateStats();
    timerEl.textContent=`Time left: ${timeLeft}s`;
    startTimer();
  }

  document.getElementById('restartGame').addEventListener('click',()=>initGame());

  // --- Image Editing Basics ---
  function initImageDrag(){
    const area=document.getElementById('imageArea');
    area.innerHTML='<img id="draggableImage" src="https://via.placeholder.com/100" draggable="false">';
    const img=document.getElementById('draggableImage');
    let dragging=false,offsetX=0,offsetY=0;

    img.addEventListener('mousedown',(e)=>{
      dragging=true;
      offsetX=e.offsetX;
      offsetY=e.offsetY;
      img.style.cursor='grabbing';
    });
    document.addEventListener('mouseup',()=>{ dragging=false; img.style.cursor='grab'; });
    document.addEventListener('mousemove',(e)=>{
      if(!dragging) return;
      const rect=img.parentElement.getBoundingClientRect();
      let left=e.clientX-rect.left-offsetX;
      let top=e.clientY-rect.top-offsetY;
      left=Math.max(0,Math.min(rect.width-img.offsetWidth,left));
      top=Math.max(0,Math.min(rect.height-img.offsetHeight,top));
      img.style.left=left+'px';
      img.style.top=top+'px';
    });
  }

  document.getElementById('restartImage').addEventListener('click',()=>initImageDrag());

});
</script>

</body>
</html>
