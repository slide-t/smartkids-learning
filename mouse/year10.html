<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SmartKids - Year 10 Mouse Practice</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { font-family:sans-serif; background:#f3f4f6; margin:0; padding:0; }
  header { background:#1e40af; color:white; padding:1rem; display:flex; justify-content:space-between; align-items:center; }
  header a { background:white; color:#1e40af; padding:0.5rem 1rem; border-radius:0.5rem; font-weight:bold; text-decoration:none; }
  main { padding:2rem; max-width:900px; margin:auto; }
  .accordion-header { cursor:pointer; padding:1rem; background:#1e3a8a; color:white; border-radius:0.5rem; margin-bottom:0.5rem; font-weight:bold; box-shadow:0 2px 5px rgba(0,0,0,0.2);}
  .accordion-content { display:none; padding:1rem; background:white; border:1px solid #d1d5db; border-radius:0.5rem; margin-bottom:1rem; }
  .practiceArea { width:100%; height:220px; background:#e5e7eb; border-radius:0.5rem; position:relative; margin-bottom:10px; overflow:hidden; }
  .object { width:60px; height:60px; background:#f59e0b; position:absolute; display:flex; justify-content:center; align-items:center; color:white; font-weight:bold; cursor:pointer; user-select:none; border-radius:0.25rem; transform-style:preserve-3d; }
  .selected { border:2px dashed #1e40af; }
  .precision { width:70px; height:50px; border:2px solid #10b981; position:absolute; top:50px; left:50px; display:flex; justify-content:center; align-items:center; }
  .stats { margin-top:0.5rem; font-weight:bold; }
  button { margin-top:5px; padding:5px 10px; background:#1e40af; color:white; border:none; border-radius:5px; cursor:pointer; }
</style>
</head>
<body>

<header>
  <h1 class="text-xl font-bold">Year 10 Mouse Practice</h1>
  <a href="https://slide-t.github.io/smartkids-learning/mouse.html">Back To Classes</a>
</header>

<main>

  <!-- Accordion 1 -->
  <div class="accordion">
    <div class="accordion-header">ðŸŒ€ 3D Object Manipulation</div>
    <div class="accordion-content">
      <p>Rotate the cube until it aligns with the target rotation (marked in green).</p>
      <div id="rotateArea" class="practiceArea"></div>
      <div class="stats">Score: <span id="rotateScore">0</span> | Time: <span id="rotateTime">0</span>s</div>
      <button id="rotateRestart">Restart</button>
    </div>
  </div>

  <!-- Accordion 2 -->
  <div class="accordion">
    <div class="accordion-header">ðŸ“š Layer Controls in Editing</div>
    <div class="accordion-content">
      <p>Drag boxes to reorder them. The one you drag should come to the front.</p>
      <div id="layerArea" class="practiceArea"></div>
      <div class="stats">Score: <span id="layerScore">0</span> | Time: <span id="layerTime">0</span>s</div>
      <button id="layerRestart">Restart</button>
    </div>
  </div>

  <!-- Accordion 3 -->
  <div class="accordion">
    <div class="accordion-header">ðŸŽ¯ Precision Selection Tools</div>
    <div class="accordion-content">
      <p>Click and drag to select the green rectangle.</p>
      <div id="precisionArea" class="practiceArea">
        <div class="precision">Target</div>
      </div>
      <div class="stats">Score: <span id="precisionScore">0</span> | Time: <span id="precisionTime">0</span>s</div>
      <button id="precisionRestart">Restart</button>
    </div>
  </div>

</main>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  const clickSound = new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");

  // Accordion
  document.querySelectorAll('.accordion-header').forEach((header,i)=>{
    header.addEventListener('click',()=>{
      const content=header.nextElementSibling;
      const isOpen=content.style.display==='block';
      document.querySelectorAll('.accordion-content').forEach(c=>c.style.display='none');
      if(!isOpen) {
        content.style.display='block';
        clickSound.play();
        if(i===0) rotateTimer.start();
        if(i===1) layerTimer.start();
        if(i===2) precisionTimer.start();
      }
    });
  });

  // Timer helper
  function createTimer(displayEl){
    let time=0, interval=null;
    return {
      start(){ if(!interval) interval=setInterval(()=>{ time++; displayEl.textContent=time; },1000); },
      reset(){ clearInterval(interval); interval=null; time=0; displayEl.textContent=0; }
    }
  }

  /* --- 3D Object Manipulation --- */
  const rotateArea=document.getElementById('rotateArea');
  const rotateScoreEl=document.getElementById('rotateScore');
  const rotateTimeEl=document.getElementById('rotateTime');
  const rotateTimer=createTimer(rotateTimeEl);
  let rotateScore=0;

  function initRotate(){
    rotateArea.innerHTML='';
    rotateScore=0; rotateScoreEl.textContent=0;
    rotateTimer.reset();

    const obj=document.createElement('div');
    obj.className='object';
    obj.textContent="Cube";
    obj.style.left="120px"; obj.style.top="60px";
    rotateArea.appendChild(obj);

    // target overlay
    const target=document.createElement('div');
    target.className='object';
    target.textContent="âœ”";
    target.style.left="260px"; target.style.top="60px";
    target.style.background="#10b981";
    rotateArea.appendChild(target);

    makeRotatable(obj,target);
  }

  function makeRotatable(el,target){
    let startX=0, rotation=0;
    el.addEventListener('mousedown',e=>{
      startX=e.clientX;
      document.onmousemove=drag;
      document.onmouseup=endDrag;
    });
    function drag(e){
      const diff=e.clientX-startX;
      rotation=diff;
      el.style.transform=`rotateY(${rotation}deg)`;
    }
    function endDrag(){
      document.onmousemove=null;
      document.onmouseup=null;
      // Check alignment
      if(Math.abs(rotation % 360 - 180)<15){ // close to 180Â°
        rotateScore++;
        rotateScoreEl.textContent=rotateScore;
        clickSound.play();
      }
    }
  }

  document.getElementById('rotateRestart').addEventListener('click',initRotate);
  initRotate();

  /* --- Layer Controls --- */
  const layerArea=document.getElementById('layerArea');
  const layerScoreEl=document.getElementById('layerScore');
  const layerTimeEl=document.getElementById('layerTime');
  const layerTimer=createTimer(layerTimeEl);
  let layerScore=0, layers=[];

  function initLayer(){
    layerArea.innerHTML='';
    layerScore=0; layerScoreEl.textContent=0;
    layerTimer.reset();
    layers=[];
    for(let i=0;i<3;i++){
      const obj=document.createElement('div');
      obj.className='object';
      obj.textContent=i+1;
      obj.style.left=(50+i*70)+'px';
      obj.style.top='50px';
      obj.style.zIndex=i+1;
      layerArea.appendChild(obj);
      layers.push(obj);
      makeLayerDraggable(obj);
    }
  }

  function makeLayerDraggable(el){
    let dragging=false, offsetX=0, offsetY=0;
    el.addEventListener('mousedown',e=>{
      dragging=true;
      offsetX=e.clientX-el.offsetLeft;
      offsetY=e.clientY-el.offsetTop;
      el.style.zIndex=1000; // bring to front
    });
    document.addEventListener('mouseup',()=>{
      if(dragging){
        dragging=false;
        layerScore++; layerScoreEl.textContent=layerScore;
        clickSound.play();
      }
      el.style.zIndex=layers.indexOf(el)+1;
    });
    document.addEventListener('mousemove',e=>{
      if(!dragging) return;
      let left=e.clientX-offsetX;
      let top=e.clientY-offsetY;
      left=Math.max(0, Math.min(layerArea.clientWidth-el.offsetWidth,left));
      top=Math.max(0, Math.min(layerArea.clientHeight-el.offsetHeight,top));
      el.style.left=left+'px';
      el.style.top=top+'px';
    });
  }

  document.getElementById('layerRestart').addEventListener('click',initLayer);
  initLayer();

  /* --- Precision Selection --- */
  const precisionArea=document.getElementById('precisionArea');
  const target=precisionArea.querySelector('.precision');
  const precisionScoreEl=document.getElementById('precisionScore');
  const precisionTimeEl=document.getElementById('precisionTime');
  const precisionTimer=createTimer(precisionTimeEl);
  let selecting=false,startX=0,startY=0;
  let precisionScore=0;

  const selection=document.createElement('div');
  selection.style.position='absolute';
  selection.style.border='2px dashed #ef4444';
  selection.style.background='rgba(239,68,68,0.2)';
  precisionArea.appendChild(selection);

  function initPrecision(){
    precisionScore=0; precisionScoreEl.textContent=0;
    precisionTimer.reset();
    selection.style.width='0'; selection.style.height='0';
  }

  precisionArea.addEventListener('mousedown',e=>{
    selecting=true;
    startX=e.offsetX; startY=e.offsetY;
    selection.style.left=startX+'px';
    selection.style.top=startY+'px';
    selection.style.width='0px';
    selection.style.height='0px';
  });

  precisionArea.addEventListener('mousemove',e=>{
    if(!selecting) return;
    const w=e.offsetX-startX;
    const h=e.offsetY-startY;
    selection.style.width=Math.abs(w)+'px';
    selection.style.height=Math.abs(h)+'px';
    selection.style.left=(w<0?e.offsetX:startX)+'px';
    selection.style.top=(h<0?e.offsetY:startY)+'px';
  });

  precisionArea.addEventListener('mouseup',()=>{
    selecting=false;
    const sel=selection.getBoundingClientRect();
    const tgt=target.getBoundingClientRect();
    if(!(sel.right<tgt.left||sel.left>tgt.right||sel.bottom<tgt.top||sel.top>tgt.bottom)){
      precisionScore++;
      precisionScoreEl.textContent=precisionScore;
      clickSound.play();
    }
  });

  document.getElementById('precisionRestart').addEventListener('click',initPrecision);
  initPrecision();

});
</script>
</body>
</html>
