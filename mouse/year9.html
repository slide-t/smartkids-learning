<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Learning Kids - Year 9 Mouse Practice</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family:sans-serif; background:#f3f4f6; margin:0; padding:0; }
    header { background:#1e40af; color:white; padding:1rem; display:flex; justify-content:space-between; align-items:center; }
    header a { background:white; color:#1e40af; padding:0.5rem 1rem; border-radius:0.5rem; font-weight:bold; text-decoration:none; }
    main { padding:2rem; max-width:900px; margin:auto; }
    .area { width:100%; height:220px; background:#e5e7eb; border-radius:0.5rem; position:relative; margin-bottom:10px; overflow:hidden; }
    .object { width:50px; height:50px; background:#f59e0b; position:absolute; display:flex; justify-content:center; align-items:center; color:white; font-weight:bold; cursor:pointer; user-select:none; border-radius:0.25rem; }
    .selected { border:2px dashed #1e40af; }
    #playhead { width:10px; height:100%; background:#1e40af; position:absolute; left:0; cursor:pointer; }
    .drop-zone { position:absolute; right:20px; bottom:20px; width:100px; height:100px; background:#10b98133; border:2px dashed #10b981; border-radius:0.5rem; display:flex; align-items:center; justify-content:center; font-weight:bold; color:#065f46; }
    .accordion-btn { background:#1e40af; color:white; padding:0.75rem; width:100%; text-align:left; font-weight:bold; border:none; outline:none; cursor:pointer; border-radius:0.5rem; margin-top:0.5rem; }
    .accordion-content { display:none; padding:1rem; background:white; border-radius:0.5rem; margin-top:0.25rem; }
    .stats { margin:0.5rem 0; }
    .stats span { margin-right:1rem; font-weight:bold; }
    .restart-btn { background:#ef4444; color:white; padding:0.3rem 0.75rem; border:none; border-radius:0.5rem; cursor:pointer; margin-left:1rem; font-size:0.9rem; }
  </style>
</head>
<body>

<header>
  <h1 class="text-xl font-bold">Year 9 Mouse Practice</h1>
  <a href="https://slide-t.github.io/smartkids-learning/mouse.html">Back To Classes</a>
</header>

<main>
  <!-- Accordion Buttons -->
  <button class="accordion-btn">Graphic Design Tools</button>
  <div class="accordion-content">
    <p>Drag the shapes into the drop zone to score points.</p>
    <div class="area" id="designArea"></div>
    <div class="drop-zone" id="designDrop">Drop Here</div>
    <div class="stats"><span id="designScore">Score: 0</span><span id="designTimer">Time: 0s</span><button class="restart-btn" onclick="restartPractice('design')">Restart</button></div>
  </div>

  <button class="accordion-btn">Multi-Select and Grouping</button>
  <div class="accordion-content">
    <p>Use Ctrl+Click to select multiple objects, then drag them together for points.</p>
    <div class="area" id="groupArea"></div>
    <div class="stats"><span id="groupScore">Score: 0</span><span id="groupTimer">Time: 0s</span><button class="restart-btn" onclick="restartPractice('group')">Restart</button></div>
  </div>

  <button class="accordion-btn">Timeline Navigation</button>
  <div class="accordion-content">
    <p>Drag the playhead to the checkpoints to score points.</p>
    <div class="area" id="timelineArea">
      <div id="playhead"></div>
    </div>
    <div class="stats"><span id="timelineScore">Score: 0</span><span id="timelineTimer">Time: 0s</span><button class="restart-btn" onclick="restartPractice('timeline')">Restart</button></div>
  </div>
</main>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // Accordion behavior
  const accordions = document.querySelectorAll('.accordion-btn');
  accordions.forEach((btn, index) => {
    btn.addEventListener('click', () => {
      const content = btn.nextElementSibling;
      if (content.style.display === "block") {
        content.style.display = "none";
      } else {
        document.querySelectorAll('.accordion-content').forEach(c => c.style.display = "none");
        content.style.display = "block";
        startTimer(practices[index].name);
      }
    });
  });

  // Track timers & scores
  let timers = {}, scores = {}, intervals = {};
  const practices = [
    { name: "design", scoreEl: "designScore", timerEl: "designTimer" },
    { name: "group", scoreEl: "groupScore", timerEl: "groupTimer" },
    { name: "timeline", scoreEl: "timelineScore", timerEl: "timelineTimer" }
  ];

  function startTimer(practice) {
    if (intervals[practice]) return;
    timers[practice] = 0;
    intervals[practice] = setInterval(() => {
      timers[practice]++;
      document.getElementById(practices.find(p=>p.name===practice).timerEl).textContent = "Time: " + timers[practice] + "s";
    }, 1000);
  }

  function addScore(practice, points=1) {
    scores[practice] = (scores[practice] || 0) + points;
    document.getElementById(practices.find(p=>p.name===practice).scoreEl).textContent = "Score: " + scores[practice];
  }

  window.restartPractice = function(practice) {
    clearInterval(intervals[practice]);
    intervals[practice] = null;
    timers[practice] = 0;
    scores[practice] = 0;
    document.getElementById(practices.find(p=>p.name===practice).timerEl).textContent = "Time: 0s";
    document.getElementById(practices.find(p=>p.name===practice).scoreEl).textContent = "Score: 0";
    if (practice==="design") initDesign();
    if (practice==="group") initGroup();
    if (practice==="timeline") initTimeline();
  };

  // --- PRACTICE 1: Design Tools ---
  const designArea = document.getElementById('designArea');
  const dropZone = document.getElementById('designDrop');
  function initDesign() {
    designArea.innerHTML="";
    for (let i=0;i<3;i++) {
      const obj=document.createElement('div');
      obj.className='object';
      obj.textContent=i+1;
      obj.style.left=(20+i*70)+'px';
      obj.style.top='50px';
      designArea.appendChild(obj);
      makeDraggable(obj, designArea, (x,y)=>{
        const dzRect=dropZone.getBoundingClientRect();
        const oRect=obj.getBoundingClientRect();
        if (oRect.left>dzRect.left && oRect.top>dzRect.top && oRect.right<dzRect.right && oRect.bottom<dzRect.bottom) {
          addScore("design",1);
          obj.remove(); // remove once placed
        }
      });
    }
  }
  initDesign();

  // --- PRACTICE 2: Grouping ---
  const groupArea=document.getElementById('groupArea');
  let selectedObjects=[];
  function initGroup() {
    groupArea.innerHTML="";
    selectedObjects=[];
    for(let i=0;i<4;i++){
      const obj=document.createElement('div');
      obj.className='object';
      obj.textContent=i+1;
      obj.style.left=(30+i*60)+'px';
      obj.style.top='50px';
      groupArea.appendChild(obj);
      makeSelectableDraggable(obj, groupArea);
    }
  }
  initGroup();

  function makeSelectableDraggable(el, container){
    let dragging=false;
    el.addEventListener('mousedown',(e)=>{
      if(!e.ctrlKey){
        selectedObjects.forEach(o=>o.classList.remove('selected'));
        selectedObjects=[el];
      } else {
        if(!selectedObjects.includes(el)) selectedObjects.push(el);
        else selectedObjects=selectedObjects.filter(o=>o!==el);
      }
      selectedObjects.forEach(o=>o.classList.add('selected'));
      dragging=true;
    });
    document.addEventListener('mouseup',()=>dragging=false);
    document.addEventListener('mousemove', e=>{
      if(!dragging) return;
      selectedObjects.forEach(o=>{
        let left=o.offsetLeft+e.movementX;
        let top=o.offsetTop+e.movementY;
        left=Math.max(0, Math.min(container.clientWidth-o.offsetWidth,left));
        top=Math.max(0, Math.min(container.clientHeight-o.offsetHeight,top));
        o.style.left=left+'px';
        o.style.top=top+'px';
      });
      if (selectedObjects.length>1) addScore("group",1);
    });
  }

  // --- PRACTICE 3: Timeline ---
  const timelineArea=document.getElementById('timelineArea');
  const playhead=document.getElementById('playhead');
  const checkpoints=[50,150,250]; // px positions
  let dragging=false, offsetX=0;
  function initTimeline() {
    playhead.style.left="0px";
  }
  initTimeline();
  playhead.addEventListener('mousedown',(e)=>{
    dragging=true; offsetX=e.offsetX;
  });
  document.addEventListener('mouseup',()=>dragging=false);
  document.addEventListener('mousemove',(e)=>{
    if(!dragging) return;
    const rect=timelineArea.getBoundingClientRect();
    let left=e.clientX-rect.left-offsetX;
    left=Math.max(0, Math.min(rect.width-playhead.offsetWidth,left));
    playhead.style.left=left+'px';
    checkpoints.forEach(cp=>{
      if (Math.abs(left-cp)<5) addScore("timeline",1);
    });
  });

  // Generic draggable helper
  function makeDraggable(el, container, onDrop){
    let dragging=false, offsetX=0, offsetY=0;
    el.addEventListener('mousedown', e=>{
      dragging=true;
      const rect=el.getBoundingClientRect();
      offsetX=e.clientX-rect.left; offsetY=e.clientY-rect.top;
    });
    document.addEventListener('mouseup',()=>{
      if(dragging && onDrop) onDrop(el.offsetLeft, el.offsetTop);
      dragging=false;
    });
    document.addEventListener('mousemove', e=>{
      if(!dragging) return;
      const rect=container.getBoundingClientRect();
      let left=e.clientX-rect.left-offsetX;
      let top=e.clientY-rect.top-offsetY;
      left=Math.max(0, Math.min(container.clientWidth-el.offsetWidth,left));
      top=Math.max(0, Math.min(container.clientHeight-el.offsetHeight,top));
      el.style.left=left+'px';
      el.style.top=top+'px';
    });
  }

});
</script>

</body>
</html>
